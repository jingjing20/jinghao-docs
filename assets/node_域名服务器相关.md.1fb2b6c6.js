import{_ as s,o as a,c as l,V as n}from"./chunks/framework.364d6ed5.js";const e="/assets/image.8a96ec0a.png",p="/assets/image-1.71ea059c.png",o="/assets/image-2.ee07874a.png",r="/assets/image-3.18818069.png",c="/assets/image-4.0d7bc321.png",t="/assets/image-5.a60f3d4a.png",i="/assets/image-6.2f192b73.png",E=JSON.parse('{"title":"从零开始搭建域名服务器","description":"","frontmatter":{},"headers":[],"relativePath":"node/域名服务器相关.md","filePath":"node/域名服务器相关.md","lastUpdated":1716548698000}'),C={name:"node/域名服务器相关.md"},y=n('<h1 id="从零开始搭建域名服务器" tabindex="-1">从零开始搭建域名服务器 <a class="header-anchor" href="#从零开始搭建域名服务器" aria-label="Permalink to &quot;从零开始搭建域名服务器&quot;">​</a></h1><h2 id="购买、域名解析" tabindex="-1">购买、域名解析 <a class="header-anchor" href="#购买、域名解析" aria-label="Permalink to &quot;购买、域名解析&quot;">​</a></h2><ul><li><p>购买域名</p></li><li><p>购买 ecs 实例</p></li><li><p>域名解析到服务器的公网 ip</p></li></ul><p><img src="'+e+'" alt="alt text"></p><ul><li><p>记录值就是域名解析到 ecs 实例的公网 ip 地址</p></li><li><p>之后就可以通过域名访问 ecs 实例了</p></li></ul><h2 id="远程登录到服务器" tabindex="-1">远程登录到服务器 <a class="header-anchor" href="#远程登录到服务器" aria-label="Permalink to &quot;远程登录到服务器&quot;">​</a></h2><ul><li>使用 ssh 远程链接</li></ul><p><img src="'+p+'" alt="alt text"></p><ul><li>执行命令</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ssh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root@101.126.55.244</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><p>101.126.55.244 是 ecs 实例的公网 ip 地址</p></li><li><p>输入密码之后就能登录到服务器了</p></li></ul><p><img src="'+o+'" alt="alt text"></p><h2 id="退出服务器" tabindex="-1">退出服务器 <a class="header-anchor" href="#退出服务器" aria-label="Permalink to &quot;退出服务器&quot;">​</a></h2><ul><li>输入 exit 退出服务器</li></ul><p><img src="'+r+`" alt="alt text"></p><h2 id="创建新用户、设置密码、添加权限" tabindex="-1">创建新用户、设置密码、添加权限 <a class="header-anchor" href="#创建新用户、设置密码、添加权限" aria-label="Permalink to &quot;创建新用户、设置密码、添加权限&quot;">​</a></h2><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 连接到远程服务器</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">your_username@remote_server_ip</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 创建新用户</span></span>
<span class="line"><span style="color:#FFCB6B;">useradd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">newuser</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 设置用户密码</span></span>
<span class="line"><span style="color:#FFCB6B;">passwd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">newuser</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 输入并确认新密码</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 确认创建了主目录（如果需要）</span></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/newuser</span></span>
<span class="line"><span style="color:#FFCB6B;">chown</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">newuser:newuser</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/newuser</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 将用户添加到 wheel 组</span></span>
<span class="line"><span style="color:#FFCB6B;">gpasswd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">newuser</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wheel</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 退出 root 会话</span></span>
<span class="line"><span style="color:#82AAFF;">exit</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 退出 SSH 会话</span></span>
<span class="line"><span style="color:#82AAFF;">exit</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ul><li><code>useradd</code> 命令在默认情况下不会创建用户的主目录。</li><li>为了确保新用户有一个主目录，你需要手动创建它并设置适当的权限。</li></ul><h3 id="为什么需要创建主目录" tabindex="-1">为什么需要创建主目录 <a class="header-anchor" href="#为什么需要创建主目录" aria-label="Permalink to &quot;为什么需要创建主目录&quot;">​</a></h3><ul><li><p><strong>用户主目录</strong>：每个用户通常都有一个自己的主目录，用来存储个人文件、配置和数据。主目录通常位于 <code>/home/username</code>。</p></li><li><p><strong>权限设置</strong>：设置主目录的所有者和组为新用户，以确保新用户对其主目录有完全控制权限。</p></li></ul><h3 id="创建主目录并设置权限" tabindex="-1">创建主目录并设置权限 <a class="header-anchor" href="#创建主目录并设置权限" aria-label="Permalink to &quot;创建主目录并设置权限&quot;">​</a></h3><p>假设你使用的 <code>useradd</code> 命令没有自动创建主目录，你可以手动执行以下步骤：</p><p><strong>手动创建主目录</strong>：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/newuser</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>设置主目录的所有者和组</strong>：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">chown</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">newuser:newuser</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/newuser</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="为用户生成密钥对" tabindex="-1">为用户生成密钥对 <a class="header-anchor" href="#为用户生成密钥对" aria-label="Permalink to &quot;为用户生成密钥对&quot;">​</a></h2><ul><li><p>用 <code>wangzhihao</code> 用户登录到远程服务器</p></li><li><p>执行命令</p></li></ul><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ssh-keygen</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>之后一路回车就可以了，这个命令会生成一个 <code>.ssh</code> 目录</li><li>里面有 <code>id_rsa</code> 和 <code>id_rsa.pub</code> 两个文件。分别是私钥和公钥。</li></ul><h2 id="用密钥的方式验证登录步骤" tabindex="-1">用密钥的方式验证登录步骤 <a class="header-anchor" href="#用密钥的方式验证登录步骤" aria-label="Permalink to &quot;用密钥的方式验证登录步骤&quot;">​</a></h2><ul><li>获取本地电脑的公钥</li></ul><p><img src="`+c+'" alt="alt text"></p><ul><li>在远程服务器上执行下面的命令</li></ul><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">vi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/.ssh/authorized_keys</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>将本地的公钥粘贴到远程服务器上的 <code>authorized_keys</code> 文件中，保存退出。</li></ul><p><img src="'+t+'" alt="alt text"></p><ul><li><p>看图上的权限 <code>rw-rw-r--</code> 的含义是：</p><ul><li>文件所有者拥有读、写权限、</li><li>组也拥有读、写权限、</li><li>其他用户拥有读权限。</li></ul></li><li><p><code>chmod 600 ~/.ssh/authorized_keys</code> 命令是用来设置 <code>authorized_keys</code> 文件的权限，以确保其安全性。</p></li></ul><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">600</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/.ssh/authorized_keys</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+i+`" alt="alt text"></p><ul><li>以下是该命令和相关步骤的详细解释：</li></ul><p><strong>权限设置的重要性</strong></p><div class="info custom-block"><p class="custom-block-title">📢</p><p><code>~/.ssh/authorized_keys</code> 文件包含了允许通过 SSH 密钥登录的公钥。为了防止未经授权的访问，这个文件的权限必须严格控制。</p></div><ul><li><code>600</code> 权限表示： <ul><li>文件所有者可以读和写（rw-）。</li><li>文件所有者所属的组不能读写（---）。</li><li>其他用户不能读写（---）。</li></ul></li></ul><h2 id="lunix-命令" tabindex="-1">lunix 命令 <a class="header-anchor" href="#lunix-命令" aria-label="Permalink to &quot;lunix 命令&quot;">​</a></h2><h3 id="ls-la" tabindex="-1">ls -la <a class="header-anchor" href="#ls-la" aria-label="Permalink to &quot;ls -la&quot;">​</a></h3><p><code>ls -la</code> 是一个用于列出目录内容的命令，包含隐藏文件，并以详细格式显示文件和目录的信息。具体来说：</p><ul><li><code>ls</code>：列出目录内容。</li><li><code>-l</code>：以长格式显示，包括文件类型、权限、硬链接数、所有者、组、文件大小和修改时间。</li><li><code>-a</code>：显示所有文件，包括以 <code>.</code> 开头的隐藏文件。</li></ul><p>下面是一个示例，说明如何使用 <code>ls -la</code> 以及输出的含义：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ls</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-la</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>假设你在主目录运行 <code>ls -la</code>，输出可能如下所示：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">total</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">48</span></span>
<span class="line"><span style="color:#FFCB6B;">drwxr-xr-x</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4096</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">May</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">24</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">14</span><span style="color:#C3E88D;">:01</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">drwxr-xr-x</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4096</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">May</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">23</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#C3E88D;">:20</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">..</span></span>
<span class="line"><span style="color:#FFCB6B;">-rw-r--r--</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">220</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">May</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">23</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#C3E88D;">:20</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.bash_logout</span></span>
<span class="line"><span style="color:#FFCB6B;">-rw-r--r--</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3771</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">May</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">23</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#C3E88D;">:20</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.bashrc</span></span>
<span class="line"><span style="color:#FFCB6B;">drwx------</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">12</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4096</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">May</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">24</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">13</span><span style="color:#C3E88D;">:58</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.cache</span></span>
<span class="line"><span style="color:#FFCB6B;">drwxrwxr-x</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4096</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">May</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">23</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#C3E88D;">:20</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.local</span></span>
<span class="line"><span style="color:#FFCB6B;">-rw-r--r--</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">807</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">May</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">23</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#C3E88D;">:20</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.profile</span></span>
<span class="line"><span style="color:#FFCB6B;">drwxrwxr-x</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4096</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">May</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">24</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">14</span><span style="color:#C3E88D;">:01</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Documents</span></span>
<span class="line"><span style="color:#FFCB6B;">drwxrwxr-x</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4096</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">May</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">24</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">14</span><span style="color:#C3E88D;">:00</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Downloads</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="输出解释" tabindex="-1">输出解释 <a class="header-anchor" href="#输出解释" aria-label="Permalink to &quot;输出解释&quot;">​</a></h3><ul><li><p><code>total 48</code>: 目录中所有文件的总块数。</p></li><li><p><code>drwxr-xr-x 6 user user 4096 May 24 14:01 .</code>:</p><ul><li><code>d</code>: 表示这是一个目录。</li><li><code>rwxr-xr-x</code>: 权限字符串。第一个字符表示文件类型，接下来的九个字符分为三组，分别表示<strong>所有者、组、其他用户</strong>的权限。 <ul><li><code>r</code>: 读权限。</li><li><code>w</code>: 写权限。</li><li><code>x</code>: 执行权限。</li></ul></li><li><code>6</code>: 硬链接数。</li><li><code>user</code>: 文件所有者。</li><li><code>user</code>: 文件所属组。</li><li><code>4096</code>: 文件大小（字节）。</li><li><code>May 24 14:01</code>: 最后修改时间。</li><li><code>.</code>: 文件名（当前目录）。</li></ul></li><li><p><code>drwxr-xr-x 3 root root 4096 May 23 10:20 ..</code>: 上级目录。</p></li><li><p><code>-rw-r--r-- 1 user user 220 May 23 10:20 .bash_logout</code>:</p><ul><li><code>-</code>: 表示这是一个普通文件。</li></ul></li></ul><h3 id="示例解释" tabindex="-1">示例解释 <a class="header-anchor" href="#示例解释" aria-label="Permalink to &quot;示例解释&quot;">​</a></h3><ul><li><code>.bash_logout</code>, <code>.bashrc</code>, <code>.profile</code>: 隐藏配置文件，以 <code>.</code> 开头。</li><li><code>Documents</code>, <code>Downloads</code>: 普通目录。</li></ul><p>使用 <code>ls -la</code> 可以全面了解目录的结构和文件的详细信息，包括隐藏文件和权限设置，非常有助于系统管理和文件管理。</p>`,57),d=[y];function u(A,h,D,b,m,F){return a(),l("div",null,d)}const _=s(C,[["render",u]]);export{E as __pageData,_ as default};
